å½“ç„¶å¯ä»¥ï¼ä»¥ä¸‹æ˜¯ä¸€ä»½å®Œæ•´ã€æ¸…æ™°ã€ä¸“ä¸šçš„ `README.md`ï¼Œé€‚ç”¨äºŽä½ çš„ç“¦ç‰‡åœ°å›¾å¤„ç†é¡¹ç›®ï¼ˆåŒ…å«çˆ¬è™«ã€æ‹¼æŽ¥ã€æœåŠ¡ä¸‰å¤§æ¨¡å—ï¼‰ï¼š

---

# ðŸ—ºï¸ ç¦»çº¿ç“¦ç‰‡åœ°å›¾å¤„ç†å·¥å…·é›†

æœ¬é¡¹ç›®æä¾›ä¸€å¥—å®Œæ•´çš„ **ç¦»çº¿åœ°å›¾å¤„ç†æµæ°´çº¿**ï¼Œæ”¯æŒï¼š
- ðŸ“¥ **ä¸‹è½½**æŒ‡å®šåŒºåŸŸçš„åœ¨çº¿åœ°å›¾ç“¦ç‰‡ï¼ˆå¦‚å¤©åœ°å›¾ã€é«˜å¾·ã€Google ç­‰ï¼‰
- ðŸ§© **æ‹¼æŽ¥**ç“¦ç‰‡ä¸ºå•å¼ å¤§å›¾ï¼ˆPNGï¼‰
- ðŸŒ **å‘å¸ƒ**æœ¬åœ°ç“¦ç‰‡æœåŠ¡ï¼Œé€šè¿‡æµè§ˆå™¨äº¤äº’å¼æµè§ˆ

> é€‚ç”¨äºŽç§‘ç ”ã€æµ‹ç»˜ã€åº”æ€¥ã€å†…ç½‘éƒ¨ç½²ç­‰æ— å¤–ç½‘æˆ–éœ€ç¦»çº¿ä½¿ç”¨çš„åœºæ™¯ã€‚

---

## ðŸ“‚ é¡¹ç›®ç»“æž„

```text
your-project/
â”œâ”€â”€ out/                 # â† ä¸‹è½½çš„åŽŸå§‹ç“¦ç‰‡ï¼ˆ256x256 å°å›¾ï¼‰
â”‚   â””â”€â”€ {z}/{x}/{y}.webp
â”œâ”€â”€ map/                 # â† æ‹¼æŽ¥åŽçš„å¤§å›¾ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ minLon_minLat_maxLon_maxLat_z{z}.png
â”œâ”€â”€ server.py            # æœ¬åœ°ç“¦ç‰‡åœ°å›¾æœåŠ¡å™¨
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ tile_crawler.py  # ç“¦ç‰‡ä¸‹è½½å™¨
â”‚   â”œâ”€â”€ stitch_tiles.py  # å•çº§æ‹¼æŽ¥
â”‚   â””â”€â”€ stitch_all.py    # å¤šçº§æ‰¹é‡æ‹¼æŽ¥
â””â”€â”€ README.md
```

---

## ðŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ ä¸‹è½½ç“¦ç‰‡ï¼ˆç¤ºä¾‹ï¼šåŒ—äº¬ zoom 7-9ï¼‰
```bash
python tile_crawler.py --config config.json
```
æˆ–è€…
```bash
python -m src.tile_crawler \
  --bbox 115.4,39.4,117.5,41.1 \
  --min-zoom 7 \
  --max-zoom 9 \
  --output-dir out \
  --format webp
```

> âœ… ç“¦ç‰‡å°†ä¿å­˜ä¸º `out/{z}/{x}/{y}.webp`

---

### 2ï¸âƒ£ æ‹¼æŽ¥ä¸ºå¤§å›¾ï¼ˆå¯é€‰ï¼‰

```bash
python stitch_tiles.py --config config.json
```

#### å•ç¼©æ”¾çº§åˆ«æ‹¼æŽ¥ï¼š
```bash
python -m src.stitch_tiles \
  --zoom 8 \
  --bbox 115.4,39.4,117.5,41.1 \
  --input-dir out \
  --output map/beijing_z8.png
```

> ðŸ“Œ è¾“å‡ºæ–‡ä»¶åæ ¼å¼ï¼š`{minLon}_{minLat}_{maxLon}_{maxLat}_z{z}.png`

---

### 3ï¸âƒ£ å¯åŠ¨æœ¬åœ°åœ°å›¾æœåŠ¡

```bash
python server.py
```

ç„¶åŽè®¿é—®ï¼š  
ðŸ‘‰ [http://localhost:5000](http://localhost:5000)

#### ç‰¹æ€§ï¼š
- è‡ªåŠ¨æ‰«æ `out/` ç›®å½•ï¼Œ**åŠ¨æ€å®šä½åˆ°ä½ å·²ä¸‹è½½çš„åŒºåŸŸ**
- å®žæ—¶æ˜¾ç¤ºå½“å‰ç¼©æ”¾çº§åˆ«ã€ç“¦ç‰‡åæ ‡ã€ç»çº¬åº¦
- æ”¯æŒ CORSï¼Œå¯è¢« QGISã€OpenLayers ç­‰å¤–éƒ¨å·¥å…·è°ƒç”¨
- ç¼ºå¤±ç“¦ç‰‡æ˜¾ç¤ºé€æ˜Žå ä½å›¾ï¼Œä¸å½±å“æµè§ˆ

---

## ðŸ” ç›®å½•è¯´æ˜Ž

| ç›®å½•/æ–‡ä»¶ | ç”¨é€” |
|----------|------|
| `out/` | **æ ¸å¿ƒæ•°æ®ç›®å½•**ï¼šå­˜æ”¾åŽŸå§‹ XYZ ç“¦ç‰‡ï¼ˆå¿…é¡»ï¼‰ |
| `map/` | æ‹¼æŽ¥åŽçš„å¤§å›¾è¾“å‡ºç›®å½•ï¼ˆå¯é€‰ï¼‰ |
| `server.py` | æœ¬åœ°ç“¦ç‰‡æœåŠ¡å™¨ï¼ˆä»Ž `out/` è¯»å–ï¼‰ |
| `src/` | æ‰€æœ‰å¤„ç†è„šæœ¬ |

> ðŸ’¡ `server.py` ä¼šè‡ªåŠ¨ä»Ž**ä¸Žè‡ªèº«åŒç›®å½•çš„ `out/`** è¯»å–ç“¦ç‰‡ï¼Œæ— éœ€ä¿®æ”¹è·¯å¾„ã€‚

---

## ðŸŒ ç“¦ç‰‡æœåŠ¡æŽ¥å£

| æŽ¥å£ | è¯´æ˜Ž |
|------|------|
| `GET /` | äº¤äº’å¼åœ°å›¾é¦–é¡µï¼ˆLeafletï¼‰ |
| `GET /tiles/{z}/{x}/{y}.png` | æ ‡å‡†ç“¦ç‰‡æŽ¥å£ï¼ˆæ”¯æŒ WebP/JPG â†’ è‡ªåŠ¨è½¬ PNGï¼‰ |
| `GET /api/tile-stats` | è¿”å›žå„ç¼©æ”¾çº§åˆ«çš„ç“¦ç‰‡æ•°é‡ç»Ÿè®¡ |

> âœ… å¯ç›´æŽ¥åœ¨ QGIS ä¸­æ·»åŠ  XYZ å›¾å±‚ï¼ŒURL å¡«ï¼š  
> `http://localhost:5000/tiles/{z}/{x}/{y}.png`

---

## âš™ï¸ ä¾èµ–

- Python â‰¥ 3.7
- ç¬¬ä¸‰æ–¹åº“ï¼š
  ```bash
  pip install flask flask-cors pillow requests tqdm
  ```

> ðŸ“Œ `Pillow` ç”¨äºŽå›¾åƒæ ¼å¼è½¬æ¢å’Œå ä½å›¾ç”Ÿæˆã€‚

---

## ðŸ“ æ³¨æ„äº‹é¡¹

- **ç“¦ç‰‡åæ ‡ç³»**ï¼šé‡‡ç”¨æ ‡å‡† Slippy Map (XYZ) åæ ‡ç³»ï¼ˆGoogle/OSM å…¼å®¹ï¼‰
- **ä»…é™æœ¬åœ°å¼€å‘**ï¼šFlask å†…ç½®æœåŠ¡å™¨ä¸é€‚åˆç”Ÿäº§çŽ¯å¢ƒ
- **å†…å­˜ä¸Žç£ç›˜**ï¼šé«˜ zoomï¼ˆå¦‚ zâ‰¥12ï¼‰æ‹¼æŽ¥å›¾å¯èƒ½æžå¤§ï¼ˆæ•° GBï¼‰ï¼Œè¯·è°¨æ…Žä½¿ç”¨
- **ç¼ºå¤±ç“¦ç‰‡**ï¼šè‹¥æŸ `(x,y,z)` ä¸å­˜åœ¨ï¼ŒæœåŠ¡è¿”å›žé€æ˜Ž PNGï¼Œå‰ç«¯ä¸ä¼šæŠ¥é”™

---

## ðŸŽ¯ å…¸åž‹åº”ç”¨åœºæ™¯

- ðŸ™ï¸ åˆ¶ä½œæŸåŸŽå¸‚çš„ç¦»çº¿åº•å›¾
- ðŸ›°ï¸ åº”æ€¥æŒ‡æŒ¥ç³»ç»Ÿä¸­çš„æ— ç½‘åœ°å›¾æ”¯æŒ
- ðŸ“Š ç§‘ç ”è®ºæ–‡ä¸­çš„é«˜æ¸…åŒºåŸŸåœ°å›¾å¯¼å‡º
- ðŸ§ª åœ°ç†æ•°æ®é¢„æ ‡æ³¨å‰çš„åº•å›¾å‡†å¤‡

---

## ðŸ“œ è®¸å¯è¯

MIT License â€” è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹ã€åˆ†å‘ã€‚

---

> ðŸŒ **è®©åœ°å›¾ï¼Œå°½åœ¨æŽŒæ¡ã€‚**  
> é¡¹ç›®ç»´æŠ¤ï¼š@realtanua | æ›´æ–°æ—¶é—´ï¼š2025å¹´12æœˆ
